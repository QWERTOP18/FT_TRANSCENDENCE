openapi: 3.0.0
info:
  title: トーナメントAPI
  description: >+
    
    トーナメント表を作成するためのAPI

    ### インストール

    準備中。。。

    ```

    docker-compose up -d

    ```

    で起動できるようにする予定。


    ### 使い方

    1. [POST] `tournaments`でトーナメントを作成する。

    1. [POST] `participants`で参加者を追加する。

    1. [POST] `tournaments/:id/open`でトーナメントを開始する。

    1. [GET] `tournaments/:id`で適宜トーナメントを取得する。

    1. [POST] `match/:id/done`で対戦結果を登録するを進める。

    1. [POST] `tournament/close`でトーナメントを閉じる。


    ### 共通エラー

    何かしらのエラーが発生した場合以下のエラーが発生する可能性があります。


    #### パラメータ

    エラーレスポンスでは以下のパラメータを必ず含みます。
     * statusCode : ステータスコード : number
     * code : エラーコード : string
     * error : statusCodeに基づくエラーメッセージ : string
     * message : 詳細なエラーメッセージ : string

    #### レスポンス例

    ```

    {
    	"statusCode":500,
    	"code":"TRT_ERR_NOT_IMPLEMENTED",
    	"error":"Internal Server Error",
    	"message":"This feature is not implemented."
    }

    ```


    #### エラーコード一覧

     > 基本的なエラーコードは [Fastify](https://fastify.dev/docs/v5.3.x/Reference/Errors/) で定義されています。

     以下はこのシステムで更に定義されているものです。

     | Code | Description | How to solve |
     | --- | :---: | :---: |
     | TRT_ERR_NOT_IMPLEMENTED | This feature is not implemented | Please contact this server maintainer |

    ### ドキュメンテーションパス
     * `/documentation` : このページ
     * `/documentation/json` : このページを生成するための生のopenapi.json

  version: 0.0.0
components:
  schemas: {}
paths:
  /tournaments:
    get:
      summary: トーナメント一覧取得
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメント一覧を取得します。

        # 注意点
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: array
                items:
                  description: トーナメント
                  type: object
                  properties:
                    id:
                      format: uuid
                      description: トーナメントID
                      type: string
                    champion_id:
                      format: uuid
                      description: 優勝者の参加者ID
                      nullable: true
                      type: string
                    owner_id:
                      format: uuid
                      description: トーナメントのオーナー参加者ID
                      type: string
                    name:
                      description: トーナメント名
                      type: string
                    description:
                      description: トーナメントの説明
                      type: string
                    state:
                      description: "トーナメントの状況 - reception: 受付中, open: 開催中, close: 終了"
                      anyOf:
                        - type: string
                          enum:
                            - reception
                        - type: string
                          enum:
                            - open
                        - type: string
                          enum:
                            - close
                    participants:
                      description: 参加者リスト
                      type: array
                      items:
                        format: uuid
                        description: 参加者ID
                        type: string
                    histories:
                      description: トーナメントの履歴
                      type: array
                      items:
                        format: uuid
                        description: 履歴ID
                        type: string
                  required:
                    - id
                    - champion_id
                    - owner_id
                    - name
                    - state
                    - participants
                    - histories
    post:
      summary: トーナメント作成
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメントを新規で作成します。

        # 注意点
        * 参加者の追加は別途、**参加者の作成**を行う必要があります。
        * マッチの追加はできません。参加者の数に応じて自動的にマッチが作成されます。＜＝この仕様は要相談。例えばオートマッチ機能を作成する？
      requestBody:
        content:
          application/json:
            schema:
              description: トーナメント
              type: object
              properties:
                name:
                  description: トーナメント名
                  type: string
              required:
                - name
        required: true
        description: トーナメント
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  id:
                    format: uuid
                    description: トーナメントID
                    type: string
                  champion_id:
                    format: uuid
                    description: 優勝者の参加者ID
                    nullable: true
                    type: string
                  owner_id:
                    format: uuid
                    description: トーナメントのオーナー参加者ID
                    type: string
                  name:
                    description: トーナメント名
                    type: string
                  description:
                    description: トーナメントの説明
                    type: string
                  state:
                    description: "トーナメントの状況 - reception: 受付中, open: 開催中, close: 終了"
                    anyOf:
                      - type: string
                        enum:
                          - reception
                      - type: string
                        enum:
                          - open
                      - type: string
                        enum:
                          - close
                  participants:
                    description: 参加者リスト
                    type: array
                    items:
                      format: uuid
                      description: 参加者ID
                      type: string
                  histories:
                    description: トーナメントの履歴
                    type: array
                    items:
                      format: uuid
                      description: 履歴ID
                      type: string
                required:
                  - id
                  - champion_id
                  - owner_id
                  - name
                  - state
                  - participants
                  - histories
  /tournaments/{id}:
    get:
      summary: トーナメント取得
      tags:
        - tournament
      description: |
        
        # 概要
        :idで指定されたトーナメントを取得します。

        # 注意点
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  id:
                    format: uuid
                    description: トーナメントID
                    type: string
                  champion_id:
                    format: uuid
                    description: 優勝者の参加者ID
                    nullable: true
                    type: string
                  owner_id:
                    format: uuid
                    description: トーナメントのオーナー参加者ID
                    type: string
                  name:
                    description: トーナメント名
                    type: string
                  description:
                    description: トーナメントの説明
                    type: string
                  state:
                    description: "トーナメントの状況 - reception: 受付中, open: 開催中, close: 終了"
                    anyOf:
                      - type: string
                        enum:
                          - reception
                      - type: string
                        enum:
                          - open
                      - type: string
                        enum:
                          - close
                  participants:
                    description: 参加者リスト
                    type: array
                    items:
                      format: uuid
                      description: 参加者ID
                      type: string
                  histories:
                    description: トーナメントの履歴
                    type: array
                    items:
                      format: uuid
                      description: 履歴ID
                      type: string
                required:
                  - id
                  - champion_id
                  - owner_id
                  - name
                  - state
                  - participants
                  - histories
    put:
      summary: トーナメント更新
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメントを更新します。

        # 注意点
        * トーナメントの名称やmax_numを変更すると混乱が生じるためおすすめしません。
        * すでに参加済みの参加者の人数以下にmax_numを設定することはできません。
      requestBody:
        content:
          application/json:
            schema:
              description: トーナメント
              type: object
              properties:
                name:
                  description: トーナメント名
                  type: string
              required:
                - name
        required: true
        description: トーナメント
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
    delete:
      summary: トーナメント削除
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメントを削除します。

        # 注意点
        * このAPIは、誤ってトーナメントを削除するのを防ぐため、使用できなくなる可能性があります。
        * トーナメントのすべての内容が消えます。
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
  /tournaments/{id}/open:
    post:
      summary: トーナメントを開始する
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメントを開始します。

        # 注意点
        * 参加者の変更ができなくなります。したがってマッチの追加もされません。
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
  /tournaments/{id}/close:
    post:
      summary: トーナメントを終了する
      tags:
        - tournament
      description: |
        
        # 概要
        開催中のトーナメントを終了します。

        # 注意点
        * 受付中のトーナメントも終了されます。
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
  /tournaments/{id}/participants:
    post:
      summary: トーナメントの参加者を取得する
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメントの参加者を取得します。

        # 注意点
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: トーナメント参加者
          content:
            application/json:
              schema:
                description: トーナメント参加者
                type: array
                items:
                  description: 参加者
                  type: object
                  properties:
                    id:
                      format: uuid
                      description: 参加者ID
                      type: string
                    tournament_id:
                      format: uuid
                      description: トーナメント ID
                      type: string
                    external_id:
                      description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                      type: string
                    state:
                      description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                        対戦済み, eliminated: 敗退, champion: 優勝"
                      anyOf:
                        - type: string
                          enum:
                            - pending
                        - type: string
                          enum:
                            - ready
                        - type: string
                          enum:
                            - in_progress
                        - type: string
                          enum:
                            - battled
                        - type: string
                          enum:
                            - eliminated
                        - type: string
                          enum:
                            - champion
                  required:
                    - id
                    - tournament_id
                    - external_id
                    - state
  /tournaments/{id}/matches:
    post:
      summary: トーナメントのマッチを取得する
      tags:
        - tournament
      description: |
        
        # 概要
        トーナメントのマッチ一覧を取得します。

        # 注意点
        * マッチは追加ができず、参加者を追加することで自動で作成されます。
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: トーナメントID
      responses:
        "200":
          description: トーナメントのマッチ
          content:
            application/json:
              schema:
                description: トーナメントのマッチ
                type: array
                items:
                  description: マッチ
                  type: object
                  properties:
                    id:
                      format: uuid
                      description: ID
                      type: string
                    tournament_id:
                      format: uuid
                      description: トーナメントID
                      type: string
                    order:
                      minimum: 0
                      description: 順番
                      type: number
                    round:
                      minimum: 0
                      description: ラウンド数
                      type: number
                    status:
                      description: "マッチの状況 - ready: 対戦開始可能, in_progress: 対戦中, done: 対戦終了"
                      anyOf:
                        - type: string
                          enum:
                            - ready
                        - type: string
                          enum:
                            - in_progress
                        - type: string
                          enum:
                            - done
                    participants:
                      maxItems: 2
                      description: 対戦相手
                      type: array
                      items:
                        description: 参加者
                        type: object
                        properties:
                          id:
                            format: uuid
                            description: 参加者ID
                            type: string
                          tournament_id:
                            format: uuid
                            description: トーナメント ID
                            type: string
                          external_id:
                            description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                            type: string
                          state:
                            description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                              対戦済み, eliminated: 敗退, champion: 優勝"
                            anyOf:
                              - type: string
                                enum:
                                  - pending
                              - type: string
                                enum:
                                  - ready
                              - type: string
                                enum:
                                  - in_progress
                              - type: string
                                enum:
                                  - battled
                              - type: string
                                enum:
                                  - eliminated
                              - type: string
                                enum:
                                  - champion
                        required:
                          - id
                          - tournament_id
                          - external_id
                          - state
                    winner:
                      description: 勝者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                    loser:
                      description: 敗者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                  required:
                    - id
                    - tournament_id
                    - order
                    - round
                    - status
                    - participants
                    - winner
                    - loser
  /matches:
    get:
      summary: マッチ取得
      tags:
        - match
      description: |
        
        # 概要
        マッチ一覧を取得します。

        # 注意点
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: array
                items:
                  description: マッチ
                  type: object
                  properties:
                    id:
                      format: uuid
                      description: ID
                      type: string
                    tournament_id:
                      format: uuid
                      description: トーナメントID
                      type: string
                    order:
                      minimum: 0
                      description: 順番
                      type: number
                    round:
                      minimum: 0
                      description: ラウンド数
                      type: number
                    status:
                      description: "マッチの状況 - ready: 対戦開始可能, in_progress: 対戦中, done: 対戦終了"
                      anyOf:
                        - type: string
                          enum:
                            - ready
                        - type: string
                          enum:
                            - in_progress
                        - type: string
                          enum:
                            - done
                    participants:
                      maxItems: 2
                      description: 対戦相手
                      type: array
                      items:
                        description: 参加者
                        type: object
                        properties:
                          id:
                            format: uuid
                            description: 参加者ID
                            type: string
                          tournament_id:
                            format: uuid
                            description: トーナメント ID
                            type: string
                          external_id:
                            description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                            type: string
                          state:
                            description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                              対戦済み, eliminated: 敗退, champion: 優勝"
                            anyOf:
                              - type: string
                                enum:
                                  - pending
                              - type: string
                                enum:
                                  - ready
                              - type: string
                                enum:
                                  - in_progress
                              - type: string
                                enum:
                                  - battled
                              - type: string
                                enum:
                                  - eliminated
                              - type: string
                                enum:
                                  - champion
                        required:
                          - id
                          - tournament_id
                          - external_id
                          - state
                    winner:
                      description: 勝者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                    loser:
                      description: 敗者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                  required:
                    - id
                    - tournament_id
                    - order
                    - round
                    - status
                    - participants
                    - winner
                    - loser
    post:
      summary: マッチ作成
      tags:
        - match
      description: |
        
        # 概要
        マッチを作成します。

        # 注意点
      responses:
        "200":
          description: マッチ
          content:
            application/json:
              schema:
                description: マッチ
                type: object
                properties:
                  id:
                    format: uuid
                    description: ID
                    type: string
                  tournament_id:
                    format: uuid
                    description: トーナメントID
                    type: string
                  order:
                    minimum: 0
                    description: 順番
                    type: number
                  round:
                    minimum: 0
                    description: ラウンド数
                    type: number
                  status:
                    description: "マッチの状況 - ready: 対戦開始可能, in_progress: 対戦中, done: 対戦終了"
                    anyOf:
                      - type: string
                        enum:
                          - ready
                      - type: string
                        enum:
                          - in_progress
                      - type: string
                        enum:
                          - done
                  participants:
                    maxItems: 2
                    description: 対戦相手
                    type: array
                    items:
                      description: 参加者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                  winner:
                    description: 勝者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                  loser:
                    description: 敗者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                required:
                  - id
                  - tournament_id
                  - order
                  - round
                  - status
                  - participants
                  - winner
                  - loser
  /matches/{id}:
    get:
      summary: マッチ取得
      tags:
        - match
      description: |
        
        # 概要
        :idで指定されたマッチを取得します。

        # 注意点
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  id:
                    format: uuid
                    description: ID
                    type: string
                  tournament_id:
                    format: uuid
                    description: トーナメントID
                    type: string
                  order:
                    minimum: 0
                    description: 順番
                    type: number
                  round:
                    minimum: 0
                    description: ラウンド数
                    type: number
                  status:
                    description: "マッチの状況 - ready: 対戦開始可能, in_progress: 対戦中, done: 対戦終了"
                    anyOf:
                      - type: string
                        enum:
                          - ready
                      - type: string
                        enum:
                          - in_progress
                      - type: string
                        enum:
                          - done
                  participants:
                    maxItems: 2
                    description: 対戦相手
                    type: array
                    items:
                      description: 参加者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                  winner:
                    description: 勝者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                  loser:
                    description: 敗者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                required:
                  - id
                  - tournament_id
                  - order
                  - round
                  - status
                  - participants
                  - winner
                  - loser
    put:
      summary: マッチを更新します
      tags:
        - match
      description: |
        
        # 概要
        :idで指定されたマッチを更新します。

        # 注意点
        * ！！！！！使えません！！！！！
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: ID
      responses:
        "200":
          description: NG
          content:
            application/json:
              schema:
                description: NG
                type: object
                properties:
                  id:
                    format: uuid
                    description: ID
                    type: string
                  tournament_id:
                    format: uuid
                    description: トーナメントID
                    type: string
                  order:
                    minimum: 0
                    description: 順番
                    type: number
                  round:
                    minimum: 0
                    description: ラウンド数
                    type: number
                  status:
                    description: "マッチの状況 - ready: 対戦開始可能, in_progress: 対戦中, done: 対戦終了"
                    anyOf:
                      - type: string
                        enum:
                          - ready
                      - type: string
                        enum:
                          - in_progress
                      - type: string
                        enum:
                          - done
                  participants:
                    maxItems: 2
                    description: 対戦相手
                    type: array
                    items:
                      description: 参加者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                  winner:
                    description: 勝者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                  loser:
                    description: 敗者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                required:
                  - id
                  - tournament_id
                  - order
                  - round
                  - status
                  - participants
                  - winner
                  - loser
    delete:
      summary: マッチ削除
      tags:
        - match
      description: |
        
        # 概要
        :idで指定されたマッチを削除します。

        # 注意点
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
  /matches/{id}/start:
    put:
      summary: マッチを開始します
      tags:
        - match
      description: |
        
        # 概要
        :idで指定されたマッチを開始します。
        statusがreadyのときにstatusをin_progressに変更します。

        # 注意点
        * 一度終了したマッチを再度開始することはできません。＜＝仕様変更可能
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
  /matches/{id}/next:
    get:
      summary: トーナメントで行う次のマッチを取得
      tags:
        - match
      description: |
        
        # 概要
        :idで指定されたトーナメントのidで、statusがreadyであるマッチのうち最もorderが小さいマッチを取得します。

        # 注意点
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  id:
                    format: uuid
                    description: ID
                    type: string
                  tournament_id:
                    format: uuid
                    description: トーナメントID
                    type: string
                  order:
                    minimum: 0
                    description: 順番
                    type: number
                  round:
                    minimum: 0
                    description: ラウンド数
                    type: number
                  status:
                    description: "マッチの状況 - ready: 対戦開始可能, in_progress: 対戦中, done: 対戦終了"
                    anyOf:
                      - type: string
                        enum:
                          - ready
                      - type: string
                        enum:
                          - in_progress
                      - type: string
                        enum:
                          - done
                  participants:
                    maxItems: 2
                    description: 対戦相手
                    type: array
                    items:
                      description: 参加者
                      type: object
                      properties:
                        id:
                          format: uuid
                          description: 参加者ID
                          type: string
                        tournament_id:
                          format: uuid
                          description: トーナメント ID
                          type: string
                        external_id:
                          description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                          type: string
                        state:
                          description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                            対戦済み, eliminated: 敗退, champion: 優勝"
                          anyOf:
                            - type: string
                              enum:
                                - pending
                            - type: string
                              enum:
                                - ready
                            - type: string
                              enum:
                                - in_progress
                            - type: string
                              enum:
                                - battled
                            - type: string
                              enum:
                                - eliminated
                            - type: string
                              enum:
                                - champion
                      required:
                        - id
                        - tournament_id
                        - external_id
                        - state
                  winner:
                    description: 勝者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                  loser:
                    description: 敗者
                    type: object
                    properties:
                      id:
                        format: uuid
                        description: 参加者ID
                        type: string
                      tournament_id:
                        format: uuid
                        description: トーナメント ID
                        type: string
                      external_id:
                        description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                        type: string
                      state:
                        description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                          対戦済み, eliminated: 敗退, champion: 優勝"
                        anyOf:
                          - type: string
                            enum:
                              - pending
                          - type: string
                            enum:
                              - ready
                          - type: string
                            enum:
                              - in_progress
                          - type: string
                            enum:
                              - battled
                          - type: string
                            enum:
                              - eliminated
                          - type: string
                            enum:
                              - champion
                    required:
                      - id
                      - tournament_id
                      - external_id
                      - state
                required:
                  - id
                  - tournament_id
                  - order
                  - round
                  - status
                  - participants
                  - winner
                  - loser
  /matches/{id}/done:
    put:
      summary: マッチ終了
      tags:
        - match
      description: |
        
        # 概要
        :idで指定されたマッチを終了します。
        statusがin_progressのときに、statusをdoneに変更します。

        # 注意点
        * 開始していないマッチは終了できません。
        * 必ずloserとwinnerの両方を指定する必要があります。
      requestBody:
        content:
          application/json:
            schema:
              description: マッチ
              type: object
              properties:
                loser:
                  description: 敗者
                  type: object
                  properties:
                    id:
                      format: uuid
                      description: 参加者ID
                      type: string
                    tournament_id:
                      format: uuid
                      description: トーナメント ID
                      type: string
                    external_id:
                      description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                      type: string
                    state:
                      description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                        対戦済み, eliminated: 敗退, champion: 優勝"
                      anyOf:
                        - type: string
                          enum:
                            - pending
                        - type: string
                          enum:
                            - ready
                        - type: string
                          enum:
                            - in_progress
                        - type: string
                          enum:
                            - battled
                        - type: string
                          enum:
                            - eliminated
                        - type: string
                          enum:
                            - champion
                  required:
                    - id
                    - tournament_id
                    - external_id
                    - state
                winner:
                  description: 勝者
                  type: object
                  properties:
                    id:
                      format: uuid
                      description: 参加者ID
                      type: string
                    tournament_id:
                      format: uuid
                      description: トーナメント ID
                      type: string
                    external_id:
                      description: 外部ID - トーナメントユーザーと外部のユーザー情報の紐付け用
                      type: string
                    state:
                      description: "参加者の状態 - pending: 参加待ち, ready: 準備完了, in_progress: 対戦中, battled:
                        対戦済み, eliminated: 敗退, champion: 優勝"
                      anyOf:
                        - type: string
                          enum:
                            - pending
                        - type: string
                          enum:
                            - ready
                        - type: string
                          enum:
                            - in_progress
                        - type: string
                          enum:
                            - battled
                        - type: string
                          enum:
                            - eliminated
                        - type: string
                          enum:
                            - champion
                  required:
                    - id
                    - tournament_id
                    - external_id
                    - state
              required:
                - loser
                - winner
        required: true
        description: マッチ
      parameters:
        - schema:
            format: uuid
            type: string
          in: path
          name: id
          required: true
          description: ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: OK
                type: object
                properties:
                  ok:
                    type: boolean
                    enum:
                      - true
                required:
                  - ok
tags:
  - name: tournament
    description: トーナメントに関するAPI
  - name: match
    description: 対戦（マッチ）に関するAPI
  - name: participant
    description: 参加者に関するAPI
